# Archived messages from: [gitter.im/red/red/Chinese](/gitter.im/red/red/Chinese/) from year: 2018

## Friday 5th January, 2018

algorev

[17:11](#msg5a4fb1cdba39a53f1add94a8)你好

qtxie

[23:14](#msg5a5006b9290a1f456154292c)你好

## Thursday 25th January, 2018

hc0219

[09:29](#msg5a69a38bd9f895c3605b765f)hello

[09:30](#msg5a69a3a0c95f22546de1c5b3)从red来入门编程了

qtxie

[09:45](#msg5a69a756ce68c3bc74ffd472)hello

## Saturday 27th January, 2018

ohmycloud

[08:48](#msg5a6c3cf5494bd0f5302f0d10)你好

## Sunday 28th January, 2018

qtxie

[03:21](#msg5a6d41d498927d5745457941)欢迎！

fizzday

[08:38](#msg5a6d8c0a6117191e61c0ded8)hello

[08:38](#msg5a6d8c0c98927d57454670db)red

qtxie

[08:39](#msg5a6d8c3e40259f1a33b8377f):red\_circle:

## Monday 29th January, 2018

jiwu-xie

[08:59](#msg5a6ee256ae53c159034a682b)hello

## Tuesday 6th February, 2018

afwerar

[08:54](#msg5a796d5b93be87284d802d4e)hello

qtxie

[12:26](#msg5a799efe6117191e61ff5fde)hello

## Wednesday 14th February, 2018

greyhawk

[14:29](#msg5a8447d75cc18726453ab621)hello

## Monday 19th February, 2018

fizzday

[06:05](#msg5a8a69400202dc012e53b7d0)the way to red

## Friday 23th February, 2018

mercurydarkork

[07:32](#msg5a8fc3a735dd17022ee1d1a5)hello

yV0PUR77jDZ4ule\_twitter

[12:31](#msg5a90098ba2194eb80da243f5)好久都没有人来了吗

## Saturday 24th February, 2018

NjinN

[13:54](#msg5a916e8635dd17022eea5d77)是的

## Friday 9th March, 2018

whsx2013001

[10:55](#msg5aa2681d458cbde55713e3d5)第一次 gitter

## Monday 2nd April, 2018

sleepaway

[06:23](#msg5ac1cc7c5f188ccc151f1ffa)dou mei ren

[06:46](#msg5ac1d1ae7c3a01610d9b1e10)有教程吗请问

qtxie

[07:22](#msg5ac1da472b9dfdbc3a480f57)零散的有一些

sleepaway

[07:50](#msg5ac1e0d25f188ccc151f6a95)没编程基础感觉学不了

## Friday 6th April, 2018

13519627212

[15:03](#msg5ac78c411130fe3d36abbac2)有red/c3相关信息吗？新人还不太了解情况

[15:06](#msg5ac78ce0c574b1aa3e7371f7)@qtxie

[15:06](#msg5ac78cf77c3a01610db4f355)@sleepaway

## Saturday 7th April, 2018

qtxie

[06:57](#msg5ac86bee2b9dfdbc3a650ae5)@13519627212 正在开发中，\[白皮书](https://ico.red-lang.org/RED-whitepaper.pdf)你有看过吗？没有的话可以看一看。

## Monday 9th April, 2018

peterkwok2018

[15:59](#msg5acb8df56bbe1d2739ca3df4)@qtxie 白皮书看过了，c3的项目在github上吗

## Tuesday 10th April, 2018

qtxie

[00:45](#msg5acc0938df3e0fb547bdfc23)还没放上去，可以关注red-lang.org，有消息会在网站上公布的。

peterkwok2018

[01:35](#msg5acc14c91130fe3d36bd8e47)@qtxie 谢谢，我申请加你qq了，也可以加微信13519627212✊

qtxie

[01:36](#msg5acc150c6bbe1d2739ccb7ec)@peterkwok2018 其实吧，在gitter上找我就行了 ;-)

peterkwok2018

[01:37](#msg5acc15706bbe1d2739ccba26)👌

## Wednesday 25th April, 2018

freeballlight\_twitter

[07:23](#msg5ae02cfe7c3a01610d1affeb)red上过交易所妈

[07:25](#msg5ae02d4d5d7286b43a6630ec)telegram 地址是啥？

## Friday 27th April, 2018

fizzday

[05:42](#msg5ae2b82e15c9b031143ecedf)怎么跟交易所扯上关系了

## Saturday 2nd June, 2018

qipilangfour

[13:36](#msg5b129d46160c567d16f9a06f)初学者，请问red用什么编辑器可高亮语法

## Sunday 3th June, 2018

hyzwhu

[01:59](#msg5b134b7c016ae21a4c05ca88)@qipilangfour vscode下载安装red插件即可

flw-cn

[05:25](#msg5b137bad93ebdb67efabee41)初学者推荐学一下 vim，性价比很高的编辑器

[05:25](#msg5b137bb6d6e73b405bae3314)号称编辑器之神

[05:25](#msg5b137bd87f403e5bbed3c04a)https://www.vim.org/download.php

qipilangfour

[12:09](#msg5b13da9216f649612401e24d)谢谢推荐，vim学习成本太大了，哈哈

[12:23](#msg5b13ddba352b9e1a4b554c4a)除了《中学生编程.pdf》还有没有中文的教程？

## Thursday 7th June, 2018

arowuzi

[19:01](#msg5b198126b6eece791de992b7)\[!\[微信图片\_20180608030420.jpg](https://files.gitter.im/red/red/Chinese/7wtg/thumb/\_\_\_\_\_20180608030420.jpg)](https://files.gitter.im/red/red/Chinese/7wtg/\_\_\_\_\_20180608030420.jpg)

[19:04](#msg5b1981a399fa7f4c0652e567)请问下 这什么情况撒

## Friday 15th June, 2018

huacolor

[07:51](#msg5b236fedc277fb705dd001fe)请问如何使 red GUI 窗口总是显示在其他窗口最前面？

NjinN

[14:57](#msg5b23d3d2ebf21755ca34951c)@arowuzi 你的这个200x200应该是输错了，要用小写字母x

## Saturday 16th June, 2018

bitbegin

[02:27](#msg5b2475a3e87f0c7bee8fa2f2)@huacolor view/flags ui 'modal

## Saturday 30th June, 2018

Linoonphan

[01:58](#msg5b36e3e2f1664406610d62c0)怎么在Linux上用vscode开发red

qtxie

[02:09](#msg5b36e65933b0282df4f3d209)@Linoonphan 开发Red本身，还是用Red来写程序？

Linoonphan

[03:00](#msg5b36f25c33b0282df4f3e3d3)写程序

qtxie

[06:56](#msg5b3729ad3c5abf52b6303d11)安装Red的插件，根据插件说明配置好，就可以开发了。

Linoonphan

[08:10](#msg5b373b06e534eb69a5bc24b1)\[!\[2018-06-30 16-09-35屏幕截图.png](https://files.gitter.im/red/red/Chinese/dzen/thumb/2018-06-30-16-09-35\_\_\_\_.png)](https://files.gitter.im/red/red/Chinese/dzen/2018-06-30-16-09-35\_\_\_\_.png)

[08:10](#msg5b373b0881816669a42459fa)但使用 'view时就会报错

qtxie

[08:48](#msg5b3743d563042f2df34a8b7e)Linux还没有view. 目前只支持Windows和macOS.

## Sunday 1st July, 2018

Linoonphan

[04:23](#msg5b385744a99e1e52b70c0084)啥 好吧

## Saturday 28th July, 2018

qwas982

[05:20](#msg5b5bfd0fc83d1230b12f8048)大家好

[05:39](#msg5b5c018e44812258443b1f14)How do I trans Redlang's formers from English characters to \[Chinese characters/Mandarin]?  
我该如何转换红语言的形态为中文字符或汉语?

[05:39](#msg5b5c019912f1be71375f75ca)Hello everyone, I found that the Redlang is much more advanced than other existing languages and supports Unicode characters. That is, the Redlang can support source code using Chinese characters or Mandarin characters , so I want to use all the sources of the Redlang . The code is translated into Chinese characters or Mandarin. Which point should I start with? What kind of tools do I need to use to do this? I found that the source code of the Redlang is not a lot, so I came up with such an idea and hope that everyone will support me. .  
大家好,我发现红语言相对于其他现存的语言来说要先进很多,并且支持Unicode字符,也就是说,红语言可以支持使用中文字符或汉字编写源代码,于是我想将红语言的所有源代码翻译为中文字符或汉语,我该从哪一点开始呢?我需要使用什么样的工具做到这样?我发现红语言的源代码并不是很多,于是就萌生了这样的想法,希望大家支持我.

[05:40](#msg5b5c01d1854add6cee0251fe)我该怎么熟悉red的源代码框架?初学者 无从下手,连语言的使用教程都没找到

bitbegin

[06:47](#msg5b5c116a3e264c713847a63c)你是学习源代码还是学习如何使用语言呢？

qwas982

[20:42](#msg5b5cd527cb4d5b036ca2143a)就两方面都想了解

[20:42](#msg5b5cd53e12f1be7137614b5e)1,想学习怎么使用这门语言,比如入门教程

[20:43](#msg5b5cd57ed4527523f63a2abd)2,想学习redlang的整个源代码的结构,架构.

[20:43](#msg5b5cd58d95988830b0847f5b)请问我该从哪里获取指导 指引

## Sunday 29th July, 2018

qtxie

[05:27](#msg5b5d502617c942036b7d7e23)@qwas982 这里

qwas982

[06:34](#msg5b5d5ff7f52b276ced4d188c)@qtxie 好的

[06:34](#msg5b5d600a966e80395028de11)请问大佬

[06:35](#msg5b5d60153e264c71384a5784)你在Q群里吗

[06:35](#msg5b5d602ddefc9823f521d6ce)我想学会

qtxie

[07:35](#msg5b5d6e43defc9823f521ef8c)@qwas982 问题发到这里就可以。我和@bitbegin会回答你的。

qwas982

[08:02](#msg5b5d747d44812258443e16c6)@qtxie 哦哦 好的,大佬

[08:02](#msg5b5d749ff52b276ced4d3ca7)@bitbegin @qtxie  
1,想学习怎么使用这门语言,比如入门教程  
2,想学习redlang的整个源代码的结构,架构.  
请问我该从哪里获取指导 指引

qtxie

[10:24](#msg5b5d95e844812258443e59a9)@qwas982 1. 如果英语不熟练，先学好英语

[10:25](#msg5b5d95fecb4d5b036ca376be)2 看 rebol core的教程

[10:25](#msg5b5d962d95988830b085e533)red源码，等完成1和2再说。

## Monday 30th July, 2018

bitbegin

[00:09](#msg5b5e57233cc39566072f13f2)中文资料还很少，这里有一点 https://github.com/red/red/wiki/Non-English-Resources

[00:10](#msg5b5e5764854add6cee073837)和 www.bitbegin.com

[00:11](#msg5b5e579edefc9823f523fc95)Red语言熟悉后，再看源码吧

[00:12](#msg5b5e57f212f1be713764579c)Red 运行时分析可以参考 https://github.com/haolloyin/red-notes/blob/v040/notes/red-runtime.md

[00:13](#msg5b5e583bc83d1230b134825d)然后 其他资料大部分都是英文， https://github.com/red/red/wiki https://www.red-lang.org/p/documentation.html

qwas982

[07:01](#msg5b5eb7ad448122584440c94f)@qtxie 哦,原来是这样啊,英语不好可以使用翻译器翻译么,

[07:01](#msg5b5eb7c2bf754466066ec76f)@qtxie red的语法和rebol的语法是一样的吗?

[07:03](#msg5b5eb82495988830b0886458)@bitbegin 哦,厉害了,这些中文资料真是帮助太大了

[07:03](#msg5b5eb854448122584440ca94)@bitbegin 好的,我晓得了,这真是入门的好去处,我觉得英语资料可以用翻译器试试

## Monday 10th September, 2018

isqwy

[07:03](#msg5b96174fcddb292dff4edc3f)测试Gritter

bitbegin

[07:04](#msg5b961774a2343433d12780e0)@isqwy hello

isqwy

[07:05](#msg5b9617c245318b2dfe882677)你好！ @bitbegin

## Saturday 15th September, 2018

NjinN

[09:48](#msg5b9cd5653b7e6c2edd1dd97c)red的中文转码有问题,Red/System\[]开头的纯R/S文件编译后可以正确显示中文字符串,但是在#system \[ ] 或者routine中试图将string!转换成c-string!会得到乱码,这个应该怎么解决? @bitbegin @qtxie

## Monday 17th September, 2018

bitbegin

[00:08](#msg5b9ef07ef08bc22dfb691986)你是怎么转换的？

NjinN

[00:50](#msg5b9efa61a56b215c974afb48)@bitbegin as c-string! string/rs-head str 和 unicode/to-utf8 str -1

[00:51](#msg5b9efa76f7e1580625df96ca)两种都试了,都不行

bitbegin

[03:23](#msg5b9f1e48a56b215c974baea0)你发一个代码片段，我看看

NjinN

[03:29](#msg5b9f1f9df4bd1056ac736719)不会用markdown...

[03:30](#msg5b9f1fde8909f71f75e50cb9)@bitbegin  
Red\[]  
#system [  
print "你好"  
]

[03:31](#msg5b9f200ffcba1254fac8281e)就这样的不涉及转换的Red代码,编译成exe文件就显示不正常

[03:34](#msg5b9f20ae54587954f9b2d26b)\[!\[6J\`3NSHKK(KM4M~ME{@($@Y.png](https://files.gitter.im/red/red/Chinese/qWtn/thumb/6J\_3NSHKK\_KM4M\_ME\_\_\_\_\_Y.png)](https://files.gitter.im/red/red/Chinese/qWtn/6J\_3NSHKK\_KM4M\_ME\_\_\_\_\_Y.png)

[03:34](#msg5b9f20dbf7e1580625e059ea)执行结果是这样的

bitbegin

[03:36](#msg5b9f212f54587954f9b2d477)我吃完饭看看什么原因

NjinN

[03:36](#msg5b9f21401ee2ca65022922c6)好的,麻烦了 @bitbegin

bitbegin

[06:44](#msg5b9f4d6254587954f9b3d332)&gt; Red/System\[]开头的纯R/S文件编译后可以正确显示中文字符串

[06:44](#msg5b9f4d68f4bd1056ac746890)这个有例子么？

[06:45](#msg5b9f4d7a3b7e6c2edd2adaba)我看Red/System是不支持utf编码的

NjinN

[06:45](#msg5b9f4d92e5c2cc56ad9f10df)Red/System \[]  
print "你好"

[06:46](#msg5b9f4db9b4990c30eec84bd8)支持的,就这个例子编译后,设置控制台编码格式为utf8,显示正常

bitbegin

[06:47](#msg5b9f4df67dca3065031155ae)那把Red string！字符转换成utf8就行了

NjinN

[06:47](#msg5b9f4e0754587954f9b3d6a1)怎么转

bitbegin

[06:47](#msg5b9f4e1aa56b215c974cb457)应该已经是了

NjinN

[06:47](#msg5b9f4e1fbe4f300626a6287e)...

bitbegin

[06:47](#msg5b9f4e1f3b7e6c2edd2adf26)只需要打印

[06:48](#msg5b9f4e38e5c2cc56ad9f13e6)等一下，我发一个片段

NjinN

[06:48](#msg5b9f4e567dca306503115775)能给个例子吗,我希望red传字符串给red/system,应该是通过routine传递吧

bitbegin

[07:27](#msg5b9f576de5c2cc56ad9f4e35)

```
Red []

a: "123你好！"

r: routine [
	str			[string!]
	/local
		len		[integer!]
		p		[c-string!]
][
	len: -1
	p: unicode/to-utf8 str :len

	print-line p
]

r a
```

[07:27](#msg5b9f577454587954f9b416f0)这样应该是对的

[07:27](#msg5b9f577bf4bd1056ac74ab47)但是 console显示不出来

NjinN

[07:32](#msg5b9f58891ee2ca65022a5d17)@bitbegin 不只是console的问题,我尝试用red调用winmm.dll来播放音乐,传进去英文文件名没问题,但是传中文文件名就不行

bitbegin

[07:33](#msg5b9f58b3fcba1254fac9717f)dll是windows的，windows用u16

[07:33](#msg5b9f58c6b4990c30eec89246)你把他转换成u16再试试

NjinN

[07:33](#msg5b9f58d1f7e1580625e1acb3)怎么转

[07:34](#msg5b9f58ede5c2cc56ad9f5913)我试过unicode/to-utf16,编译过了,但是还是乱码

bitbegin

[07:35](#msg5b9f594ed655361f760f8185)unicode/to-utf16-len

[07:35](#msg5b9f5953e5c2cc56ad9f5af9)你用这个试试

[07:36](#msg5b9f5966f7e1580625e1b032)u16需要一个长度代码结尾吧

NjinN

[07:36](#msg5b9f597eb9531f2dfa7aeb15)那怎么办,能给个例子吗

bitbegin

[07:37](#msg5b9f59b2fcba1254fac97a41)你可以用 `dump-hex as byte-ptr! p` 来确认结果是否正确

[07:38](#msg5b9f5a0754587954f9b42985)

```
Red []

a: "123你好！"

r: routine [
	str			[string!]
	/local
		len		[integer!]
		p		[c-string!]
][
	len: -1
	p: unicode/to-utf16-len str :len no

	dump-hex as byte-ptr! p
	print-line len
	print-line p
]

r a
```

NjinN

[07:41](#msg5b9f5ab17dca30650311a7c9)@bitbegin 另外想问一下,red文件里有request-file编译报错,是不是要include什么文件

bitbegin

[07:42](#msg5b9f5aec3b7e6c2edd2b3070)

```
PS D:\red\red> .\tests.exe

Hex dump from: 02935340h

02935340: 31 00 32 00 33 00 60 4F  7D 59 01 FF 00 00 00 00  1.2.3.`O}Yþÿ....
02935350: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  ................
02935360: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  ................
02935370: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  ................
02935380: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  ................
02935390: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  ................
029353A0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  ................
029353B0: 00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  ................
6
1
```

[07:42](#msg5b9f5afe7dca30650311aa71)这个是打印结果

[07:43](#msg5b9f5b10fcba1254fac983ef)你 - 0x 4F60

[07:43](#msg5b9f5b1ffcba1254fac98464)好 - 0x 597D

[07:44](#msg5b9f5b450cfe7f30f1a6f7c4)说明转换时正确的

[07:44](#msg5b9f5b6db9531f2dfa7af52a)windows的dll一般有两组接口，一个是char，一个是wchar

[07:44](#msg5b9f5b788909f71f75e66b38)你看看你是否用错了

[07:45](#msg5b9f5b9654587954f9b43295)&gt; red文件里有request-file编译报错,是不是要include什么文件

[07:45](#msg5b9f5ba3b4990c30eec8a948)一般是其他地方的错误引起的把

NjinN

[07:46](#msg5b9f5bc67dca30650311b066)编译器显示找不到request-file标志服

bitbegin

[07:48](#msg5b9f5c67e5c2cc56ad9f7176)Needs: 'View

[07:49](#msg5b9f5c6d54587954f9b43826)估计是要加这个

NjinN

[07:49](#msg5b9f5c860cfe7f30f1a6ff39)已经加了

bitbegin

[07:49](#msg5b9f5c9d0cfe7f30f1a6ffd0)你弄个片段我看看

NjinN

[07:52](#msg5b9f5d4bb9531f2dfa7b00ac)额,刚试了一下,又没问题了...

[07:52](#msg5b9f5d507dca30650311bc5b)@bitbegin 谢谢了

## Tuesday 18th September, 2018

NjinN

[06:30](#msg5ba09b88fcba1254fad127d2)@bitbegin 回去,试了一下, 没能解决问题, 也试过换另一个dll接口, 结果直接不能用了

bitbegin

[08:30](#msg5ba0b793f4bd1056ac7d0701)这样描述，没办法帮你定位的

NjinN

[14:44](#msg5ba10f61b9531f2dfa8579b8)'''  
Red\[Needs: 'View]  
#system [  
#import [  
"winmm.dll" stdcall [  
mciCommand: "mciSendStringA" [  
lpszCommand \[c-string!]  
lpszReturnString \[c-string!]  
cchReturn \[integer!]  
hwndCallback \[integer!]  
]  
]  
]  
mci: func \[s \[red-string!] /local cs \[c-string!] len] [  
print \[s "^/"]  
len: -1  
cs: as c-string! string/rs-head s  
print \[cs "^/"]  
mciCommand cs null 0 0  
mciCommand {set Mp3File time format ms} null 0 0  
mciCommand {seek Mp3File to 0} null 0 0  
mciCommand {play Mp3File} null 0 0  
]  
]  
play: routine \[s \[string!]] \[mci s]  
view [  
size 200x120  
below  
center  
f: field 150 on-up [  
f/text: to-local-file request-file  
show f  
]  
button "Play" [  
cm: rejoin \[ {open } f/text { type MPEGVideo alias Mp3File}]  
play cm  
]  
button "Quit" \[ quit ]  
]  
'''

[14:45](#msg5ba10fa7b4990c30eed320d3)@bitbegin 代码我贴上来了，如果有时间又没事做的话，麻烦看一下怎么改才能支持包含中文路径的mp3文件的播放

[14:49](#msg5ba11086d655361f7619fa25)中间字符串转码的部分，几种转换方式我都试过了

## Wednesday 19th September, 2018

bitbegin

[00:45](#msg5ba19c33913ba7799b0e8dd0)好

[00:55](#msg5ba19e77b4990c30eed685a7)

```
Red[Needs: 'View]

#system [
    #import [
       "winmm.dll" stdcall [
           mciCommand: "mciSendStringA" [
               lpszCommand [c-string!]
               lpszReturnString [c-string!]
               cchReturn [integer!]
               hwndCallback [integer!]
           ]
           mciCommandW: "mciSendStringW" [
               lpszCommand [c-string!]
               lpszReturnString [c-string!]
               cchReturn [integer!]
               hwndCallback [integer!]
           ]
       ]
    ]
    mci: func [s [red-string!] /local cs [c-string!]] [
        cs: unicode/to-utf16 s
        mciCommandW cs null 0 0
        mciCommand {set Mp3File time format ms} null 0 0
        mciCommand {seek Mp3File to 0} null 0 0
        mciCommand {play Mp3File} null 0 0
    ]
]
play: routine [s [string!]] [mci s]
view [
    size 200x120
    below
    center
    f: field 150 on-up [
        f/text: to-local-file request-file
        show f
    ]
    button "Play" [
        cm: rejoin [ {open } f/text { type MPEGVideo alias Mp3File}]
        play cm
    ]
    button "Quit" [ quit ]
]
```

[00:55](#msg5ba19e7f913ba7799b0e98e0)你先这样看看

[00:59](#msg5ba19f598909f71f75f473c9)不行的就这样

[00:59](#msg5ba19f5c913ba7799b0e9d29)

```
Red[Needs: 'View]

#system [
    #import [
       "winmm.dll" stdcall [
           mciCommand: "mciSendStringA" [
               lpszCommand [c-string!]
               lpszReturnString [c-string!]
               cchReturn [integer!]
               hwndCallback [integer!]
           ]
           mciCommandW: "mciSendStringW" [
               lpszCommand [c-string!]
               lpszReturnString [c-string!]
               cchReturn [integer!]
               hwndCallback [integer!]
           ]
       ]
    ]
    set-cmd: #u16 {set Mp3File time format ms}
    seek-cmd: #u16 {seek Mp3File to 0}
    play-cmd: #u16 {play Mp3File}
    mci: func [s [red-string!] /local cs [c-string!]] [
        cs: unicode/to-utf16 s
        mciCommandW cs null 0 0
        mciCommandW set-cmd null 0 0
        mciCommandW seek-cmd null 0 0
        mciCommandW play-cmd null 0 0
    ]
]
play: routine [s [string!]] [mci s]
view [
    size 200x120
    below
    center
    f: field 150 on-up [
        f/text: to-local-file request-file
        show f
    ]
    button "Play" [
        cm: rejoin [ {open } f/text { type MPEGVideo alias Mp3File}]
        play cm
    ]
    button "Quit" [ quit ]
]
```

NjinN

[14:54](#msg5ba263347dca3065032447a9)@bitbegin 方法2好用的，谢谢

## Thursday 20th September, 2018

haolloyin

[08:59](#msg5ba36160b4990c30eee0e44d)哇，看到你们的高端用法，这个 `#u16` 我还没用到过。  
原来 R/S 规范文档里是有写 `#u16` 的：https://static.red-lang.org/red-system-specs-light.html#section-16.10  
源码里也有： https://github.com/red/red/blob/master/system/compiler.r#L1797

我看 bit兄 是用了 `xxxW` 的 win32 接口，并把字符串转成 utf16 搞定的？  
@bitbegin @NjinN

[09:07](#msg5ba36354f4bd1056ac8d6042)我也以为 R/S 不支持 utf8，因为我在 win7 下是乱码，刚才看了去 linux 下能用 R/S 打印出中文了。奇怪。

好像文档也说是用 ASCII 编码的，在需要的时候才切换到 Red 层的 UTF-8 模式？  
https://static.red-lang.org/red-system-specs-light.html#section-2 有这句话：  
&gt; For now, Red/System uses 8-bit character encoding (\*\*ASCII\*\*). Once proper Unicode support will be provided by the Red language layer, \*\*Red/System will switch to UTF-8 source encoding\*\*.

我看源码只是 R/S 的 `print` 等这一类函数才有可能用 Red 的实现来套用？  
https://github.com/red/red/blob/master/system/runtime/libc.reds#L138-L145

```
#either unicode? = yes [

	#define prin			[red/platform/prin*]
	#define prin-int		[red/platform/prin-int*]
	#define prin-hex		[red/platform/prin-hex*]
	#define prin-2hex		[red/platform/prin-2hex*]
	#define prin-float		[red/platform/prin-float*]
	#define prin-float32	[red/platform/prin-float32*]
	
][
	prin: func [s [c-string!] return: [c-string!] /local p][
		p: s
		while [p/1 <> null-byte][
			putchar p/1
			p: p + 1
		]
		s
	]
        ....
]
```

[09:30](#msg5ba368ca1ee2ca650242e092)&gt; @bitbegin 方法2好用的，谢谢

请问你编译这第二段代码没报错吗？  
我编译了提示 to-utf16 不存在，奇怪，这个函数在 Red 运行时里有的。  
MSDOS 和 Windows 两种 target 都不行。

```
Target: MSDOS

Compiling to native code...
Compilation Error: undefined symbol: red/unicode/to-utf16 in file: %/E/Dropbox/2048.reds/build/mp3player.red
in function: exec/mci at line: 332
* near: [unicode/to-utf16 s
mciCommandW cs null 0 0
mciCommandW
]
```

\`  
Target: Windows

Compiling to native code...  
\*\** Compilation Error: undefined symbol: red/unicode/to-utf16  
\*\** in file: %/E/Dropbox/2048.reds/build/mp3player.red  
\*\** in function: exec/mci  
\*\** at line: 332  
\*\** near: [unicode/to-utf16 s  
mciCommandW cs null 0 0  
mciCommandW  
]

bitbegin

[09:34](#msg5ba369afbe4f300626bf4fb7)我是可以编译的

NjinN

[09:36](#msg5ba36a0bd655361f7628694b)我编译也没问题, 不过之前 @bitbegin 给的例子里有 '''dump-hex'''的, 我编译不过

[09:36](#msg5ba36a30b4990c30eee11cad)@haolloyin 要不你下载red最新版试试

haolloyin

[09:43](#msg5ba36bbdfcba1254fae2aa11)多谢两位。  
我刚才是用以前下载的一个 daily build 版本，失败。  
现在重新下载一个最新的 daily build，在 Win7 还是不行。我在折腾下看看。

[09:44](#msg5ba36be37dca3065032a64d8)@NjinN  
`dump-hex` 是要打开 debug 开关自己编译一个 Red 二进制才行的。

[10:00](#msg5ba36fa4e6046343f38c9b5e)可以了，加 -r 来编译就行了。: )

NjinN

[12:39](#msg5ba395008909f71f75007f3d)@bitbegin 为什么我这边第一次播放没问题，换歌就不行？

[13:19](#msg5ba39e511043315947bc9155)额，是我没搞懂winmm，已经改好了

[14:20](#msg5ba3aca6913ba7799b1b0a84)@bitbegin 怎么才能拿到mciSendStringW的返回值

[14:21](#msg5ba3ace3f7e1580625fc4942)这样写编译过不了

[14:36](#msg5ba3b0815df5194734e9d122) mci-position: func\[return: \[red-string!] /local s \[c-string!]] [  
s: #u16 {}  
mciCommand #u16 {status Mp3File position} s 0 0  
return as red-string! stack/set-last as red-value! string/load s length? s UTF-16  
]

[14:37](#msg5ba3b09fbe4f300626c124b3)\[!\[4\[)4WU5DVW(2WTKSASERJ\[S.png](https://files.gitter.im/red/red/Chinese/Elmk/thumb/4\_\_4WU5DVW\_2WTKSASERJ\_S.png)](https://files.gitter.im/red/red/Chinese/Elmk/4\_\_4WU5DVW\_2WTKSASERJ\_S.png)

## Friday 21st September, 2018

bitbegin

[00:30](#msg5ba43bb90cfe7f30f1c51627)

```
mci-position: func[return: [red-string!] /local s [c-string!] rs [red-string!]] [
		s: allocate 100
		mciCommand #u16 {status Mp3File position} s 0 0
    rs: string/load s length? s UTF-16  
    free s
		return as red-string! stack/set-last as red-value! rs
	]
```

[00:32](#msg5ba43c05f7e1580625ffabab)差不多这样，你调试一下

NjinN

[01:08](#msg5ba444847dca3065032fa911)@bitbegin 我用mciSendStringA实现了,你这个我晚点试一下,谢谢

[12:29](#msg5ba4e41cb4990c30eeea1c2d)@bitbegin 报错了

[12:29](#msg5ba4e4368909f71f75087507)\[!\[U]X319PYWEE5AS\_]X\[Q5\[4R.png](https://files.gitter.im/red/red/Chinese/PwEA/thumb/U\_X319PYWEE5AS\_\_X\_Q5\_4R.png)](https://files.gitter.im/red/red/Chinese/PwEA/U\_X319PYWEE5AS\_\_X\_Q5\_4R.png)

bitbegin

[15:02](#msg5ba5080d7dca306503344861)加个 as c-string!

## Sunday 23th September, 2018

NjinN

[01:05](#msg5ba6e6c4e5c2cc56adcc9824)@bitbegin 还是会报错，UTF-16和free都找不到

bitbegin

[01:06](#msg5ba6e70cb9531f2dfaa83ac7)\[!\[图片.png](https://files.gitter.im/red/red/Chinese/vaq6/thumb/\_\_.png)](https://files.gitter.im/red/red/Chinese/vaq6/\_\_.png)

[01:06](#msg5ba6e71b5df5194734fc5d53)你在Red的source code里面找例子

NjinN

[01:14](#msg5ba6e8fb1043315947cf8951)看来下个源码还是有必要的。。。

[02:32](#msg5ba6fb42d655361f763d2585)用length？没办法拿到utf16字符串的正确长度，看源码貌似用了lstrlen，估计是另外定义的，我这边直接用不行

[03:02](#msg5ba70255b9531f2dfaa8c08b)自己写了一个lstrlen，已经实现了，就是感觉麻烦了一点
