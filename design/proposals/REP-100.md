
#100: WISH: dumber `construct`
================================================================================
Issue is open, was reported by hiiamboris and has 24 comment(s).
<https://github.com/red/REP/issues/100>

Discussed [around here](https://gitter.im/red/bugs?at=5f99392ab4283c208a2d7215)

```
>> m: #(a: 'a b: b: c: :c)
== #(
    a: 'a
    b: b:
    c: :c
)
>> construct to block! m
== make object! [
    a: 'a
    b: :c
    c: :c
]
```
It is currently impossible to use `construct` to pass **any** value to object fields, so one has to `set/any` those fields post-construction.

I would like `construct` to treat it's block as key-value pairs. Because otherwise it's all up to workarounds.



Comments:
--------------------------------------------------------------------------------

On 2021-03-17T19:29:42Z, Oldes, commented:
<https://github.com/red/REP/issues/100#issuecomment-801351806>

    Just a note.. I can find many places in old Rebol code where is used `construct` as a shortcut:
    ```rebol
    >> construct [a: b: c:]
    == make object! [
        a: none
        b: none
        c: none
    ]
    ```

--------------------------------------------------------------------------------

On 2021-03-17T19:31:25Z, Oldes, commented:
<https://github.com/red/REP/issues/100#issuecomment-801352793>

    Maybe you should rather request for a way how to convert a `map!` into `object!` like:
    ```rebol
    >> make object! m: #(a: 'a b: b: c: :c)
    == make object! [
        a: 'a
        b: b:
        c: :c
    ]
    ```

--------------------------------------------------------------------------------

On 2021-03-17T19:38:19Z, Oldes, commented:
<https://github.com/red/REP/issues/100#issuecomment-801357019>

    And just for a record... one important aspect of `construct`:
    ```rebol
    >> construct [a: 1 print "hello" b: 2]
    == make object! [
        a: 1
        b: 2
    ]
    
    >> object [a: 1 print "!!! hello !!!" b: 2]
    !!! hello !!!
    == make object! [
        a: 1
        b: 2
    ]
    ```

--------------------------------------------------------------------------------

On 2021-03-17T19:49:34Z, hiiamboris, commented:
<https://github.com/red/REP/issues/100#issuecomment-801376033>

    The need arises not only from maps, but every time you want to construct an object from known words and values. 
    I would sacrifice `construct [a: b: c:]` for `object [a: b: c: none]` - it's easy to adapt it. 
    While setting *every* object's word to a value is a lot of overhead (esp. considering that construct-using functions are meant to be fast).

--------------------------------------------------------------------------------

On 2021-03-17T20:10:33Z, Oldes, commented:
<https://github.com/red/REP/issues/100#issuecomment-801405655>

    I would like to see your real life `construct` use. Or ideal use.

--------------------------------------------------------------------------------

On 2021-03-17T20:19:31Z, Oldes, commented:
<https://github.com/red/REP/issues/100#issuecomment-801415925>

    It would be also nice to see _unit tests_ for all situations, which may become ;-)
    
    Btw... in the chat you was wondering, why `construct/only` is not the default behavior... the reason is, that main use for `construct` was meant to be loading settings from external files.. where you don't want to evaluate potentially dangerous code (like with `object`), but still have common words like `true`, `false` or `none` not to be words, but logic or none values.

--------------------------------------------------------------------------------

On 2021-03-17T20:24:14Z, hiiamboris, commented:
<https://github.com/red/REP/issues/100#issuecomment-801418651>

    Where it matters:
    - `anonymize` could have been shorter/faster: https://gitlab.com/hiiamboris/red-mezz-warehouse/-/blob/master/setters.red#L133
    - `apply` when given an object (but that's a temporary/experimental design) https://gitlab.com/hiiamboris/red-mezz-warehouse/-/blob/master/apply.red#L23
    
    In other code I have I usually know the data and know it won't hit mentioned edge cases.

--------------------------------------------------------------------------------

On 2021-03-17T20:26:18Z, hiiamboris, commented:
<https://github.com/red/REP/issues/100#issuecomment-801419848>

    > why construct/only is not the default behavior... the reason is
    
    That's good to know, thanks. Good use case.

--------------------------------------------------------------------------------

On 2021-03-17T20:35:03Z, Oldes, commented:
<https://github.com/red/REP/issues/100#issuecomment-801425321>

    In both cases you are making object with just one key... I'm not sure if it's good reason for changing `construct` behavior.

--------------------------------------------------------------------------------

On 2021-03-17T20:36:23Z, Oldes, commented:
<https://github.com/red/REP/issues/100#issuecomment-801426149>

    Btw... in Rebol3 `construct` is also used to parse strings into objects... like:
    ```rebol
    >> construct "a: 1^/b: 2^/c: 3 4"
    == make object! [
        a: "1"
        b: "2"
        c: "3 4"
    ]
    ```

--------------------------------------------------------------------------------

On 2021-03-17T21:24:03Z, hiiamboris, commented:
<https://github.com/red/REP/issues/100#issuecomment-801452753>

    maybe not worth changin the default, but then I'd like a refinement for it, or `/only` to be dumb.

--------------------------------------------------------------------------------

On 2021-06-17T17:15:44Z, greggirwin, commented:
<https://github.com/red/REP/issues/100#issuecomment-863417995>

    Related chat on `make` with objects and maps WRT words: https://gitter.im/red/help?at=60cb051cb346e9618bd74a28
    
    Having a clear guide and behavior is important, because maps are close to the idea of passive objects, so people need to understand their similarities and differences.

