
#142: WISH: `lit word!` Parse rule to literally match data by reference
================================================================================
Issue is open, was reported by hiiamboris and has 12 comment(s).
<https://github.com/red/REP/issues/142>

Rationale - untangle cases where excess of smarts requires ugly workarounds:
```
;) trying to match integer found in first block with integer in another block:
parse [3] [set n integer!]
parse [3] [set n2 integer! if (n = n2)]    ;) parse-only variant
parse [3] compose [quote (n)]              ;) parse hacked with composition

;) ditto for words
parse [abc] [set word word!]
parse [abc] compose [quote (word)]

;) trying to figure out if all words in the block are the same:
parse [a 1 2 a 3]   [to set w word! (w: compose [quote (w)]) any [w | not word! skip]]   ;) == true
parse [a 1 2 a 3 b] [to set w word! (w: compose [quote (w)]) any [w | not word! skip]]   ;) == false
```
How it could have been written:
```
parse [3] [set n integer!]
parse [3] [lit n]

parse [abc] [set word word!]
parse [abc] [lit word]

parse [a 1 2 a 3] [to set w word! any [lit w | not word! skip]]
```
Proposed semantics:
- `lit only word!` - fetches word value and passes it to `quote` branch
- `lit word!` - for non-blocks works as `lit only`, for blocks matches every value in the block as if it was quoted: `[quote a quote 1 quote 2]`
- hash, paren - debatable


Comments:
--------------------------------------------------------------------------------

On 2023-03-13T20:10:30Z, greggirwin, commented:
<https://github.com/red/REP/issues/142#issuecomment-1466889072>

    Nice idea.
    
    Naming is tricky here. I've suggested `lit` as a new name for `quote` in the past, because `quote` is simply a carryover name from Lisp, and `lit` (while not a full word), matches how we think of "literal" in Red. What you're talking about is not a literal value, but a reference that *also* treats the value literally. That matches `parse`'s implicit composition, but might be confusing.
    
    If get-words didn't have such a different meaning in `parse`. We might use `:quote` as a keyword.

--------------------------------------------------------------------------------

On 2025-03-19T18:41:35Z, gurzgri, commented:
<https://github.com/red/REP/issues/142#issuecomment-2737676303>

    Interesting proposal and interesting discussion on naming things, too. May I throw in `cite`?
    
    ```
    parse [3] [set n integer!]
    parse [3] [cite n]
    
    parse [abc] [set word word!]
    parse [abc] [cite word]
    
    parse [a 1 2 a 3] [to set w word! any [cite w | not word! skip]]
    ```
    
    The semantic proximity with `quote` might be helpfull to stress that there is a difference to what `quote` does. Or, what do I know, it might be confusing - native speakers might tell.
    
    Even `get` seems to read well here (but is of course very generic).

--------------------------------------------------------------------------------

On 2025-03-19T22:17:31Z, GiuseppeChillemi, commented:
<https://github.com/red/REP/issues/142#issuecomment-2738299412>

    This has been resurrected because I came to the same need and proposed the keyword `of` [here](https://matrix.to/#/!dgvJeYaEyPkbAtFkNB:gitter.im/$Lfc3grRTK60ya8_sE3i9zupU4BTBtkstmmqHN5NmA9M?via=gitter.im&via=matrix.org&via=tchncs.de)
    
    But LIT is good to and even better. What is important is it being implemented as makes a lot of rules involving values used in parse DSL very easy to write.

--------------------------------------------------------------------------------

On 2025-03-20T21:01:55Z, greggirwin, commented:
<https://github.com/red/REP/issues/142#issuecomment-2741652159>

    `Cite` doesn't sound great to me. It implies indirection but not literality.

--------------------------------------------------------------------------------

On 2025-03-20T21:49:07Z, GiuseppeChillemi, commented:
<https://github.com/red/REP/issues/142#issuecomment-2741746690>

    `OF`, `LIT`, `MATCH` are possible choices. `LIT` is more standard with the language. `LIT` and `MATCH` may let think that it is the block as a whole to match but the whole `parse` without reading the documentation, is impossible to understand, so people must read it event in this case. My vote for `LIT` and I can vote with 2 hands ad 2 accounts (4 votes total) if it helps it to be implemented (together with DO and DO ONLY but this will be another wish)
    
     

--------------------------------------------------------------------------------

On 2025-03-21T02:47:03Z, greggirwin, commented:
<https://github.com/red/REP/issues/142#issuecomment-2742114548>

    `match` is a general pattern matching name, much as `like` is.

