
#116: WISH: infinity in pairs or complex number type
================================================================================
Issue is open, was reported by hiiamboris and has 6 comment(s).
<https://github.com/red/REP/issues/116>

In Spaces I have to deal a lot with canvas sizes that can be:
- limited (normal pair)
- unlimited (I'm using `none` for this)
- half-unlimited, i.e. along either X or Y, but not both (I'm using 2'000'000'000 for unlimited axis)

Arithmetic unfortunately becomes quite meticulous. Every place I need to divide a dimension or for example subtract margin size from it, or if I want to extend canvas along some axis to infinity, I have to handle all the options and normalization. 

This makes me spend a lot of code/time on implementation details, leading to a lot of bugs where I forgot about infinity, all of which would be nice to avoid.  If `pair!` was floating point, this would have all worked out of the box: infinity is not affected by finite addition or positive division.

Of course the biggest question then is lexical form, for which `..x..` is not a good fit, but some other form involving comma may be better suited.

Another form could be smth like `1 + 2i` where `2i` would be a lexical form for a imaginary part, and `+` would at runtime add real part to it. Such type could support trigonometry in complex number space. Implementation of `complex!` datatype may be shared with floating point `pair!`, except trigonometry native typesets would only accept the former.


Comments:
--------------------------------------------------------------------------------

On 2022-04-22T17:54:33Z, greggirwin, commented:
<https://github.com/red/REP/issues/116#issuecomment-1106736232>

    Lexical form _is_ a big question, but I thin there are other big ones too. One being whether integer-only pair division promotes to floating point. That will have a ripple effect down into the graphics APIs. The form question leads to whether a "pair" in any other form is a 2D point. @dockimbel has suggested `(x, y, z)` as a `point!` form. That's not a bad form, but it has the issue of commas being used as decimal points today, and leads to exceptions. e.g. today `>> [1, 2, 3]  == [1.0 2.0 3]` I doubt any code will break if we require comma-space for a new notation, but it's another wrinkle in space.
    
    The next thing this leads to is bounds/range, the 1D counterpart. Given the subject of this ticket, that domain should consider infinities as well, but adds yet one more attribute: open-closed. That's a wreck if we try to match the bracket-paren notation interval math uses, and also makes us ask: for a _standard_ type, how important is that level of control? Are we better off supporting it, or does it make users lives harder than if we say "All intervals are open-closed." And _that_ is ugly because we all know how pervasive off-by-one errors are.

--------------------------------------------------------------------------------

On 2022-04-22T18:08:38Z, hiiamboris, commented:
<https://github.com/red/REP/issues/116#issuecomment-1106745762>

    > One being whether integer-only pair division promotes to floating point
    
    I think this is a good thing, esp. with our UI scaling.
    
    > one more attribute: open-closed
    
    Implementation-wise this should be easy and transparent: we could add/subtract a bit to turn closed interval into an open one. `form` and `mold` (without /all) could detect these cases and round them a bit for display, maybe adapting the lexical output accordingly. But the question of lexical form here is open as well. If `..` is used as a closed range constructor, smth like `>..<` could be used to mark open ends.

--------------------------------------------------------------------------------

On 2022-04-22T18:18:17Z, hiiamboris, commented:
<https://github.com/red/REP/issues/116#issuecomment-1106752594>

    :point_up: [March 13, 2022 9:13 PM](https://gitter.im/red/red/gui-branch?at=622e345d6b9124232030f4d1) linking my previous thoughts here as well

