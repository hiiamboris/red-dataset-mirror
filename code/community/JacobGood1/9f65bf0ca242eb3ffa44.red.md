# 

**Gist ID:** 9f65bf0ca242eb3ffa44
**Created:** 2016-01-01T04:18:55Z
**Last updated:** 2016-01-01T04:18:55Z

## File: `ugly-parse-practice.red`

```Red
destructure-fn: function [input-code destr-fn-counter] [
    code: copy []
    destructure-format: join "block" destr-fn-counter
   	rule: [
        some [ mark:
               '& set w word! (append code to-set-word w append code 'copy append code 'skip append code to-path copy destructure-format append code index-of back mark mark: next next mark) :mark  
            |  set w word! (append code to-set-word w append code to-path copy join destructure-format ["/" index-of mark]) 
            |  (if not tail? mark [append destructure-format "/" append destructure-format index-of mark]) into rule (take/last/part destructure-format 2) 
        ]
    ]

    parse input-code rule

    compose/deep [[(to-word destructure-format)] [(code)]]
]


destr-args: function [args] [
    code: copy/deep [[] []]
    function-counter: 1
    each e args [
        either (type-of e) = block! [
            des-code: copy destructure-fn e ++ function-counter
            append code/1 des-code/1
            append code/2 des-code/2  
        ] [
            append code/1 e
        ]     
    ]
    code
]

defn: function [args body][
	code: copy/deep destr-args args
	function code/1 compose append code/2 body
]
```

## Comments

No comments.
