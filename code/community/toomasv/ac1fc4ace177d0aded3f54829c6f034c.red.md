# For extracting code from blocks

**Gist ID:** ac1fc4ace177d0aded3f54829c6f034c
**Created:** 2017-11-28T13:22:51Z
**Last updated:** 2017-11-28T13:45:12Z

## File: `extract-code.red`

```Red
Red [
	Author: "Toomas Vooglaid"
	Date: 28-11-2017
	Using: https://gist.github.com/toomasv/eaac3829ac5e745f43121aa60b555d68
	Note: {Applicable only if arguments to functions are not themselves functions}
]
do %../utils/info.red ; change to the location of info.red
extract-code: func [block [block!] /filter flt [word! block!] /local s nam fn refs inf args][
	refs: 0
	parse block [collect some [
		s:
		path! if (any-function? fn: get/any nam: s/1/1)(
			inf: info fn
			;inf/name: nam
			args: length? inf/args 
			foreach ref next to-block s/1 [
				refs: refs + length? pick inf/ref-types index? find inf/ref-names ref
			]
		)
		keep (copy/part s args + refs + 1)
	| 	word! if (any-function? fn: get/any nam: s/1)(
			inf: info fn
			;inf/name: nam
			args: length? inf/args 
		)
		keep (either op! = inf/type [copy/part back s args + 1][copy/part s args + 1])
	| 	skip
	]]
]
;extract-code [1 + 2 find/skip [a b c d] 'c 2 square-root 4 print "hello" copy/part [a b c] 2]

```

## Comments

No comments.
