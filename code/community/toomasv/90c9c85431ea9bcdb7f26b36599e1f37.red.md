# Replace expressions in block with their value without copying

**Gist ID:** 90c9c85431ea9bcdb7f26b36599e1f37
**Created:** 2018-05-27T06:08:40Z
**Last updated:** 2018-05-27T07:52:58Z

## File: `revalue.red`

```Red
Red [
	Author: "Toomas Vooglaid"
	Date: 2018-05-26
	Purpose: "Replace expressions in block with their values"
	File: %revalue.red
	Licence: "Free"
]
revalue: func [
	"Replaces expressions in block with their values"
	block [block!] 
	/deep "Evaluate also expressions in nested blocks"
	/all "Evaluate block until it doesn't change anymore, i.e. until all expressions are revaluated"
	/local pos
][
	while [not empty? block][
		block1: copy/deep block
		block: either system/words/all [deep block? :block/1][
			change/only block revalue/deep block/1
		][
			change/part block do/next block 'pos pos
		]
	] while [system/words/all [all block1 <> block: head block]] [
		either deep [revalue/deep/all block][revalue/all block]
	] head block
]
```

## Comments

No comments.
