# Float32! to integer! conversion routine

**Gist ID:** 2919931
**Created:** 2012-06-12T20:28:48Z
**Last updated:** 2015-10-06T02:28:07Z

## File: `ftoi.reds`

```Red
Red/System [
	Title:   "Float32! to integer! conversion routine"
	Author:  "Nenad Rakocevic"
	Rights:  "Copyright (C) 2011 Nenad Rakocevic. All rights reserved."
	License: "BSD-3 - https://github.com/dockimbel/Red/blob/origin/BSD-3-License.txt"
	Note:    "Thanks to FranÃ§ois Jouen for providing me the C code for ftoi()"
]

float-to-integer: func [
	f [float32!]			;-- float 32-bit value to convert
	return: [integer!]		;-- truncated integer value returned
	/local dw exp value
][
	dw: as-integer f
	if zero? dw [return 0]
	
	exp: ((dw >>> 23) and FFh) - 127
	if any [negative? exp exp > 23][return 0]
	
	value: (1 << exp) + ((dw and 007FFFFFh) >> (23 - exp))
	either negative? dw [negate value][value]
]
```

## Comments

No comments.
